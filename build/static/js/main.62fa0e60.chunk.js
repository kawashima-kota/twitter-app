(this["webpackJsonptwitter-app"]=this["webpackJsonptwitter-app"]||[]).push([[0],{110:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(12),o=a.n(r),c=(a(96),a(68)),i=a.n(c),l=a(25),u=a(60),d=Object(u.b)({name:"user",initialState:{user:{uid:"",photoUrl:"",displayName:""}},reducers:{login:function(e,t){e.user=t.payload},logout:function(e){e.user={uid:"",photoUrl:"",displayName:""}},updateUserProfile:function(e,t){e.user.displayName=t.payload.displayName,e.user.photoUrl=t.payload.photoUrl}}}),p=d.actions,m=p.login,j=p.logout,_=p.updateUserProfile,b=function(e){return e.user.user},h=d.reducer,f=a(24),g=(a(113),a(104),a(112),{apiKey:"AIzaSyAiCYCfpwIIsadNgRN3xFbn3u6RLHgF_oI",authDomain:"reading-recoder.firebaseapp.com",databaseURL:"https://reading-recoder.firebaseio.com",projectId:"reading-recoder",storageBucket:"reading-recoder.appspot.com",messagingSenderId:"177752633329",appId:"1:177752633329:web:9759a577e3e8e91919de50",measurementId:"G-WXMGVJSP95"});f.a.initializeApp(g);var x=f.a.firestore(),O=f.a.auth(),v=f.a.storage(),w=new f.a.auth.GoogleAuthProvider,N=a(14),y=a(15),I=a.n(y),k=a(27),S=a(32),P=a.n(S),C=a(151),U=a(141),T=a(142),A=a(75),D=a.n(A),F=a(3),R=function(){var e=Object(l.c)(b),t=Object(n.useState)(null),a=Object(N.a)(t,2),s=a[0],r=a[1],o=Object(n.useState)(""),c=Object(N.a)(o,2),i=c[0],u=c[1];return Object(F.jsx)(F.Fragment,{children:Object(F.jsxs)("form",{onSubmit:function(t){if(t.preventDefault(),s){var a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",n=Array.from(crypto.getRandomValues(new Uint32Array(16))).map((function(e){return a[e%a.length]})).join("")+"_"+s.name;v.ref("images/".concat(n)).put(s).on(f.a.storage.TaskEvent.STATE_CHANGED,(function(){}),(function(e){alert(e.message)}),Object(k.a)(I.a.mark((function t(){return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.ref("images").child(n).getDownloadURL().then(function(){var t=Object(k.a)(I.a.mark((function t(a){return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.collection("posts").add({avatar:e.photoUrl,image:a,text:i,timestamp:f.a.firestore.FieldValue.serverTimestamp(),username:e.displayName});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 2:case"end":return t.stop()}}),t)}))))}else x.collection("posts").add({avatar:e.photoUrl,image:"",text:i,timestamp:f.a.firestore.FieldValue.serverTimestamp(),username:e.displayName});r(null),u("")},children:[Object(F.jsxs)("div",{className:P.a.tweet_form,children:[Object(F.jsx)(C.a,{className:P.a.tweet_avatar,src:e.photoUrl,onClick:Object(k.a)(I.a.mark((function e(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.signOut();case 2:case"end":return e.stop()}}),e)})))}),Object(F.jsx)("input",{className:P.a.tweet_input,placeholder:"What's happening?",type:"text",autoFocus:!0,value:i,onChange:function(e){return u(e.target.value)}}),Object(F.jsx)(U.a,{children:Object(F.jsxs)("label",{children:[Object(F.jsx)(D.a,{className:s?P.a.tweet_addIconLoaded:P.a.tweet_addIcon}),Object(F.jsx)("input",{className:P.a.tweet_hiddenIcon,type:"file",onChange:function(e){e.target.files[0]&&(r(e.target.files[0]),e.target.value="")}})]})})]}),Object(F.jsx)(T.a,{type:"submit",disabled:!i,className:i?P.a.tweet_sendBtn:P.a.tweet_sendDisableBtn,children:"Tweet"})]})})},L=a(76),W=a.n(L),B=a(17),E=a.n(B),V=a(143),G=a(77),M=a.n(G),q=a(58),z=a.n(q),J=Object(V.a)((function(e){return{small:{width:e.spacing(3),height:e.spacing(3),marginRight:e.spacing(1)}}})),K=function(e){var t,a=J(),s=Object(l.c)(b),r=Object(n.useState)(""),o=Object(N.a)(r,2),c=o[0],i=o[1],u=Object(n.useState)([{id:"",avatar:"",text:"",timestamp:null,username:""}]),d=Object(N.a)(u,2),p=d[0],m=d[1],j=Object(n.useState)(!1),_=Object(N.a)(j,2),h=_[0],g=_[1];Object(n.useEffect)((function(){var t=x.collection("posts").doc(e.postId).collection("comments").orderBy("timestamp","desc").onSnapshot((function(e){m(e.docs.map((function(e){return{id:e.id,avatar:e.data().avatar,text:e.data().text,username:e.data().username,timestamp:e.data().timestamp}})))}));return function(){t()}}),[e.postId]);return Object(F.jsxs)("div",{className:E.a.post,children:[Object(F.jsx)("div",{className:E.a.post_avatar,children:Object(F.jsx)(C.a,{src:e.avatar})}),Object(F.jsxs)("div",{className:E.a.post_body,children:[Object(F.jsxs)("div",{children:[Object(F.jsx)("div",{className:E.a.post_header,children:Object(F.jsxs)("h3",{children:[Object(F.jsxs)("span",{className:E.a.post_headerUser,children:["@",e.username]}),Object(F.jsx)("span",{className:E.a.post_headerTime,children:new Date(null===(t=e.timestamp)||void 0===t?void 0:t.toDate()).toLocaleString()})]})}),Object(F.jsx)("div",{className:E.a.post_tweet,children:Object(F.jsx)("p",{children:e.text})})]}),e.image&&Object(F.jsx)("div",{className:E.a.post_tweetImage,children:Object(F.jsx)("img",{src:e.image,alt:"tweet"})}),Object(F.jsx)(M.a,{className:E.a.post_commentIcon,onClick:function(){return g(!h)}}),h&&Object(F.jsxs)(F.Fragment,{children:[p.map((function(e){var t;return Object(F.jsxs)("div",{className:E.a.post_comment,children:[Object(F.jsx)(C.a,{src:e.avatar,className:a.small}),Object(F.jsxs)("span",{className:E.a.post_commentUser,children:["@",e.username]}),Object(F.jsxs)("span",{className:E.a.post_commentText,children:[e.text," "]}),Object(F.jsx)("span",{className:E.a.post_headerTime,children:new Date(null===(t=e.timestamp)||void 0===t?void 0:t.toDate()).toLocaleString()})]},e.id)})),Object(F.jsx)("form",{onSubmit:function(t){t.preventDefault(),x.collection("posts").doc(e.postId).collection("comments").add({avatar:s.photoUrl,text:c,timestamp:f.a.firestore.FieldValue.serverTimestamp(),username:s.displayName}),i("")},children:Object(F.jsxs)("div",{className:E.a.post_input,children:[Object(F.jsx)("input",{className:E.a.post_input,type:"text",placeholder:"Type new comment...",value:c,onChange:function(e){return i(e.target.value)}}),Object(F.jsx)("button",{disabled:!c,className:c?E.a.post_button:E.a.post_buttonDisable,type:"submit",children:Object(F.jsx)(z.a,{className:E.a.post_sendIcon})})]})})]})]})]})},H=function(){var e,t=Object(n.useState)([{id:"",avatar:"",image:"",text:"",timestamp:null,username:""}]),a=Object(N.a)(t,2),s=a[0],r=a[1];return Object(n.useEffect)((function(){var e=x.collection("posts").orderBy("timestamp","desc").onSnapshot((function(e){return r(e.docs.map((function(e){return{id:e.id,avatar:e.data().avatar,image:e.data().image,text:e.data().text,timestamp:e.data().timestamp,username:e.data().username}})))}));return function(){e()}}),[]),Object(F.jsxs)("div",{className:W.a.feed,children:[Object(F.jsx)(R,{}),(null===(e=s[0])||void 0===e?void 0:e.id)&&Object(F.jsx)(F.Fragment,{children:s.map((function(e){return Object(F.jsx)(K,{postId:e.id,avatar:e.avatar,image:e.image,text:e.text,timestamp:e.timestamp,username:e.username},e.id)}))})]})},X=a(42),Y=a.n(X),Q=a(144),Z=a(145),$=a(146),ee=a(147),te=a(148),ae=a(149),ne=a(150),se=a(81),re=a.n(se),oe=a(80),ce=a.n(oe),ie=a(78),le=a.n(ie),ue=a(79),de=a.n(ue);var pe=Object(V.a)((function(e){return{root:{height:"100vh"},image:{backgroundImage:"url(https://images.unsplash.com/photo-1581784368651-8916092072cf?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=934&q=80)",backgroundRepeat:"no-repeat",backgroundColor:"light"===e.palette.type?e.palette.grey[50]:e.palette.grey[900],backgroundSize:"cover",backgroundPosition:"center"},paper:{margin:e.spacing(8,4),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)},modal:{outline:"none",position:"absolute",width:400,borderRadius:10,backgroundColor:"white",boxShadow:e.shadows[5],padding:e.spacing(10)}}})),me=function(){var e=pe(),t=Object(l.b)(),a=function(){var e=Object(k.a)(I.a.mark((function e(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.signInWithPopup(w).catch((function(e){return alert(e.message)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),r=Object(n.useState)(""),o=Object(N.a)(r,2),c=o[0],i=o[1],u=Object(n.useState)(""),d=Object(N.a)(u,2),p=d[0],m=d[1],j=Object(n.useState)(!0),b=Object(N.a)(j,2),h=b[0],f=b[1],g=Object(n.useState)(""),x=Object(N.a)(g,2),y=x[0],S=x[1],P=Object(n.useState)(null),A=Object(N.a)(P,2),D=A[0],R=A[1],L=s.a.useState(!1),W=Object(N.a)(L,2),B=W[0],E=W[1],V=Object(n.useState)(""),G=Object(N.a)(V,2),M=G[0],q=G[1],J=function(){var e=Object(k.a)(I.a.mark((function e(t){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.sendPasswordResetEmail(M).then((function(){E(!1),q(""),alert("\u30d1\u30b9\u30ef\u30fc\u30c9\u306e\u518d\u8a2d\u5b9a\u7528\u306e\u30e1\u30fc\u30eb\u3092\u9001\u4fe1\u3057\u307e\u3057\u305f\u3002")})).catch((function(e){alert(e.message),q("")}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=Object(k.a)(I.a.mark((function e(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.signInWithEmailAndPassword(c,p);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),H=function(){var e=Object(k.a)(I.a.mark((function e(){var a,n,s,r,o,i;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.createUserWithEmailAndPassword(c,p);case 2:if(n=e.sent,s="",!D){e.next=14;break}return r="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",16,o=Array.from(crypto.getRandomValues(new Uint32Array(16))).map((function(e){return r[e%r.length]})).join(""),i=o+"_"+D.name,e.next=11,v.ref("avatars/".concat(i)).put(D);case 11:return e.next=13,v.ref("avatars").child(i).getDownloadURL();case 13:s=e.sent;case 14:return e.next=16,null===(a=n.user)||void 0===a?void 0:a.updateProfile({displayName:y,photoURL:s});case 16:t(_({displayName:y,photoUrl:s}));case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(F.jsxs)(Q.a,{container:!0,component:"main",className:e.root,children:[Object(F.jsx)(Z.a,{}),Object(F.jsx)(Q.a,{item:!0,xs:!1,sm:4,md:7,className:e.image}),Object(F.jsx)(Q.a,{item:!0,xs:12,sm:8,md:5,component:$.a,elevation:6,square:!0,children:Object(F.jsxs)("div",{className:e.paper,children:[Object(F.jsx)(C.a,{className:e.avatar,children:Object(F.jsx)(le.a,{})}),Object(F.jsx)(ee.a,{component:"h1",variant:"h5",children:"Sign in"}),Object(F.jsxs)("form",{className:e.form,noValidate:!0,children:[!h&&Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(te.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"username",label:"Username",name:"username",autoComplete:"username",autoFocus:!0,value:y,onChange:function(e){S(e.target.value)}}),Object(F.jsx)(ae.a,{textAlign:"center",children:Object(F.jsx)(U.a,{children:Object(F.jsxs)("label",{children:[Object(F.jsx)(de.a,{fontSize:"large",className:D?Y.a.login_addIconLoaded:Y.a.login_addIcon}),Object(F.jsx)("input",{className:Y.a.login_hiddenIcon,type:"file",onChange:function(e){e.target.files[0]&&(R(e.target.files[0]),e.target.value="")}})]})})})]}),Object(F.jsx)(te.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,value:c,onChange:function(e){i(e.target.value)}}),Object(F.jsx)(te.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:p,onChange:function(e){m(e.target.value)}}),Object(F.jsx)(T.a,{disabled:h?!c||p.length<6:!y||!c||p.length<6||!D,fullWidth:!0,variant:"contained",color:"primary",className:e.submit,startIcon:Object(F.jsx)(ce.a,{}),onClick:h?Object(k.a)(I.a.mark((function e(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,K();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),alert(e.t0.message);case 8:case"end":return e.stop()}}),e,null,[[0,5]])}))):Object(k.a)(I.a.mark((function e(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,H();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),alert(e.t0.message);case 8:case"end":return e.stop()}}),e,null,[[0,5]])}))),children:h?"Login":"Register"}),Object(F.jsxs)(Q.a,{container:!0,children:[Object(F.jsx)(Q.a,{item:!0,xs:!0,children:Object(F.jsx)("span",{className:Y.a.login_reset,onClick:function(){E(!0)},children:"Forgot Password ?"})}),Object(F.jsx)(Q.a,{item:!0,children:Object(F.jsx)("span",{className:Y.a.login_toggleMode,onClick:function(){return f(!h)},children:h?"Create new account ?":"Back to login"})})]}),Object(F.jsx)(T.a,{fullWidth:!0,variant:"contained",color:"primary",startIcon:Object(F.jsx)(re.a,{}),className:e.submit,onClick:a,children:"Sign In with Google"})]}),Object(F.jsx)(ne.a,{open:B,onClose:function(){return E(!1)},children:Object(F.jsx)("div",{style:{top:"".concat(50,"%"),left:"".concat(50,"%"),transform:"translate(-".concat(50,"%, -").concat(50,"%)")},className:e.modal,children:Object(F.jsxs)("div",{className:Y.a.login_modal,children:[Object(F.jsx)(te.a,{InputLabelProps:{shrink:!0},type:"email",name:"email",label:"Reset E-mail",value:M,onChange:function(e){q(e.target.value)}}),Object(F.jsx)(U.a,{onClick:J,children:Object(F.jsx)(z.a,{})})]})})})]})})]})},je=function(){var e=Object(l.c)(b),t=Object(l.b)();return Object(n.useEffect)((function(){var e=O.onAuthStateChanged((function(e){t(e?m({uid:e.uid,photoUrl:e.photoURL,displayName:e.displayName}):j())}));return function(){e()}}),[t]),Object(F.jsx)(F.Fragment,{children:e.uid?Object(F.jsx)("div",{className:i.a.app,children:Object(F.jsx)(H,{})}):Object(F.jsx)(me,{})})},_e=Object(u.a)({reducer:{user:h}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(Object(F.jsx)(s.a.StrictMode,{children:Object(F.jsx)(l.a,{store:_e,children:Object(F.jsx)(je,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},17:function(e,t,a){e.exports={post:"Post_post__hw-08",post_avatar:"Post_post_avatar__1cYoN",post_body:"Post_post_body__1xeAk",post_header:"Post_post_header__3aAYF",post_headerUser:"Post_post_headerUser__1GBNh",post_headerTime:"Post_post_headerTime__1NrXF",post_tweet:"Post_post_tweet__2MCoD",post_tweetImage:"Post_post_tweetImage__1Wriu",post_commentIcon:"Post_post_commentIcon__smd2E",post_comment:"Post_post_comment__3i52D",post_commentUser:"Post_post_commentUser__2cSFm",post_commentText:"Post_post_commentText__116jQ",post_form:"Post_post_form__1fvdV",post_input:"Post_post_input__2fPS9",post_button:"Post_post_button__NDp-z",post_buttonDisable:"Post_post_buttonDisable__3TRyO"}},32:function(e,t,a){e.exports={tweet_form:"TweetInput_tweet_form__1rtT-",tweet_avatar:"TweetInput_tweet_avatar__2yWKC",tweet_input:"TweetInput_tweet_input__2x3uw",tweet_addIcon:"TweetInput_tweet_addIcon___KnyW",tweet_addIconLoaded:"TweetInput_tweet_addIconLoaded__20MoG",tweet_hiddenIcon:"TweetInput_tweet_hiddenIcon__2E99F",tweet_sendBtn:"TweetInput_tweet_sendBtn__2KG_v",tweet_sendDisableBtn:"TweetInput_tweet_sendDisableBtn__3VOVb"}},42:function(e,t,a){e.exports={login_toggleMode:"Auth_login_toggleMode__1GcmO",login_modal:"Auth_login_modal__3OgR1",login_reset:"Auth_login_reset__35RJ3",login_hiddenIcon:"Auth_login_hiddenIcon__26KOs",login_addIcon:"Auth_login_addIcon__2Uq9h",login_addIconLoaded:"Auth_login_addIconLoaded__n83Lx"}},68:function(e,t,a){e.exports={app:"App_app__1kX79"}},76:function(e,t,a){e.exports={feed:"Feed_feed__1VDlB"}},96:function(e,t,a){}},[[110,1,2]]]);
//# sourceMappingURL=main.62fa0e60.chunk.js.map